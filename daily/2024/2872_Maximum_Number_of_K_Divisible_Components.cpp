#include <iostream>
#include <vector>

using namespace std;

class Solution {
public:
    int ans = 0;
    int maxKDivisibleComponents(int n, vector<vector<int>>& edges, vector<int>& values, int k) {
        vector<vector<int>> graph(n);
        for (auto& edge : edges){
            int start = edge[0];
            int end = edge[1];
            graph[start].push_back(end);
            graph[end].push_back(start);
        }
        vector<bool> visited(n, false);
        dfs(graph, visited, values, 0, k);
        return ans;
    }
    int dfs(vector<vector<int>>& graph, vector<bool>& visited, vector<int>& values, int node, int k){
        visited[node] = true;
        int sum = values[node] % k;
        for (int neighbor : graph[node]){
            if (!visited[neighbor]){
                sum = (sum + dfs(graph, visited, values, neighbor, k)) % k;
            }
        }
        if (sum % k == 0) ans++;
        return sum;
    }
};

int main(){
    int n = 5;
    vector<vector<int>> edges = {{0,2},{1,2},{1,3},{2,4}};
    vector<int> values = {1,8,1,4,4};
    int k = 6;
    // int n = 7;
    // vector<vector<int>> edges = {{0,1},{0,2},{1,3},{1,4},{2,5},{2,6}};
    // vector<int> values = {3,0,6,1,5,2,1};
    // int k = 3;
    // int n = 703;
    // vector<vector<int>> edges = {{486,401},{486,426},{401,448},{426,6},{448,208},{448,551},{6,522},{6,656},{401,504},{401,229},{486,315},{551,440},{6,689},{689,98},{486,55},{504,302},{486,330},{330,693},{302,603},{330,676},{401,505},{693,564},{440,52},{448,100},{504,36},{504,48},{100,573},{401,650},{676,276},{504,417},{505,601},{417,384},{208,619},{98,493},{302,600},{36,206},{689,393},{619,658},{573,324},{417,165},{504,441},{426,132},{276,21},{393,531},{426,512},{6,23},{100,187},{23,395},{206,19},{493,628},{19,126},{21,89},{126,610},{676,171},{450,70},{70,647},{70,553},{553,7},{553,489},{489,226},{553,268},{7,349},{450,96},{70,143},{70,495},{349,104},{349,362},{89,268},{431,269},{269,649},{431,344},{431,323},{649,598},{269,492},{649,554},{598,360},{269,537},{492,134},{492,160},{431,615},{537,502},{360,147},{492,596},{323,245},{431,354},{554,278},{354,369},{615,478},{649,406},{369,604},{369,335},{360,237},{344,645},{615,95},{344,353},{615,532},{134,445},{448,360},{535,86},{535,419},{419,117},{117,442},{86,9},{419,423},{419,444},{444,267},{535,292},{442,653},{653,525},{86,107},{419,22},{478,535},{75,641},{75,694},{641,319},{75,413},{641,222},{694,158},{222,227},{413,629},{319,200},{319,231},{319,699},{694,295},{158,238},{158,271},{227,374},{641,506},{374,41},{75,617},{222,483},{41,121},{227,497},{231,321},{231,679},{227,310},{553,694},{687,523},{523,575},{575,85},{687,424},{424,234},{424,332},{424,265},{234,382},{382,499},{687,566},{332,83},{332,159},{575,556},{566,508},{424,429},{556,106},{687,209},{209,511},{556,583},{523,366},{265,415},{511,77},{234,657},{77,560},{366,53},{508,496},{523,174},{556,328},{415,470},{382,242},{83,579},{511,214},{523,58},{560,221},{511,347},{209,376},{429,140},{174,40},{85,635},{209,458},{523,29},{328,169},{106,283},{159,257},{366,622},{347,178},{583,230},{601,511},{210,103},{103,161},{161,59},{210,380},{210,357},{210,361},{361,256},{357,280},{103,193},{210,371},{371,18},{280,43},{210,333},{18,17},{43,340},{340,124},{59,654},{103,11},{340,688},{333,422},{688,481},{43,681},{371,510},{11,585},{340,300},{210,0},{300,46},{103,675},{585,574},{481,311},{675,189},{333,258},{371,477},{258,696},{258,408},{256,697},{256,430},{124,690},{43,119},{681,157},{585,182},{357,578},{422,90},{371,516},{681,385},{408,569},{340,67},{59,24},{67,285},{256,120},{675,616},{357,155},{210,518},{518,639},{124,183},{119,397},{155,498},{333,149},{280,691},{510,482},{183,167},{18,110},{103,611},{292,11},{314,81},{314,141},{141,701},{81,633},{237,633},{350,49},{49,494},{494,443},{49,154},{494,581},{49,338},{49,71},{49,16},{49,307},{338,682},{154,464},{307,683},{350,224},{71,414},{71,99},{154,8},{414,375},{682,236},{494,316},{417,154},{666,179},{666,248},{179,47},{248,128},{47,45},{45,534},{534,436},{47,391},{436,453},{391,563},{675,391},{358,519},{519,76},{358,392},{519,550},{358,32},{550,61},{392,605},{32,170},{392,168},{168,184},{32,546},{32,402},{76,452},{392,388},{452,684},{605,199},{61,246},{402,543},{32,421},{402,549},{316,358},{162,345},{162,403},{162,327},{327,287},{162,91},{287,530},{345,686},{91,381},{327,674},{91,517},{345,3},{91,555},{162,411},{555,108},{686,700},{530,644},{403,342},{686,479},{327,379},{644,463},{91,428},{108,279},{279,607},{403,472},{674,698},{428,102},{381,509},{411,191},{411,195},{698,262},{191,570},{512,191},{501,329},{501,670},{329,528},{528,539},{329,251},{670,240},{329,153},{501,377},{153,308},{501,254},{329,192},{251,74},{251,68},{195,308},{239,651},{239,263},{239,455},{263,669},{669,28},{651,235},{596,455},{525,69},{343,320},{343,197},{197,597},{343,386},{320,270},{320,351},{343,405},{644,320},{72,433},{72,446},{72,580},{446,439},{446,606},{72,66},{446,303},{433,487},{606,668},{487,664},{439,490},{439,243},{580,475},{66,533},{580,488},{439,503},{66,57},{580,449},{475,637},{439,536},{664,266},{243,692},{692,678},{66,84},{266,259},{678,451},{637,677},{433,20},{72,584},{664,435},{72,562},{536,253},{435,306},{533,590},{253,624},{678,667},{475,394},{435,545},{303,540},{677,572},{22,490},{325,194},{194,547},{325,105},{547,93},{325,173},{194,56},{325,65},{56,216},{194,456},{456,461},{93,390},{547,365},{65,652},{325,558},{390,643},{173,476},{105,648},{65,591},{390,223},{461,514},{390,368},{648,294},{390,185},{547,673},{652,164},{223,659},{648,359},{294,520},{164,220},{194,552},{359,567},{365,373},{164,142},{368,541},{456,301},{648,457},{552,212},{223,180},{194,484},{65,205},{212,631},{65,356},{552,175},{105,247},{223,296},{220,44},{547,111},{180,626},{643,588},{514,64},{652,115},{476,284},{541,312},{44,260},{44,286},{368,150},{56,322},{220,304},{115,176},{476,491},{365,133},{142,291},{673,148},{291,485},{547,127},{541,135},{461,123},{180,80},{135,326},{208,175},{468,225},{468,151},{115,468},{576,293},{576,204},{204,367},{293,50},{293,122},{367,336},{50,313},{576,663},{574,293},{5,599},{599,144},{599,277},{5,131},{5,592},{277,249},{599,500},{599,272},{500,339},{277,636},{5,73},{592,334},{73,207},{334,252},{277,4},{5,39},{207,264},{39,346},{592,14},{334,634},{131,462},{144,299},{339,54},{339,35},{346,15},{636,459},{252,228},{76,599},{26,420},{26,10},{10,614},{614,211},{614,116},{614,218},{32,420},{244,290},{160,290},{317,113},{113,623},{113,261},{317,101},{317,130},{261,2},{261,138},{130,166},{113,618},{166,460},{113,434},{261,577},{577,544},{618,201},{544,398},{138,1},{544,582},{113,513},{130,672},{618,383},{513,38},{113,233},{101,621},{623,79},{460,177},{1,524},{460,680},{398,447},{621,594},{672,305},{680,78},{41,177},{215,281},{281,30},{281,695},{695,568},{281,145},{281,660},{215,589},{145,94},{94,318},{145,288},{318,31},{568,432},{589,241},{31,474},{145,469},{318,42},{30,425},{469,186},{589,297},{469,273},{288,595},{42,27},{281,250},{30,418},{432,437},{250,400},{288,630},{418,625},{695,331},{418,416},{94,217},{318,542},{331,33},{630,12},{660,136},{273,409},{145,370},{400,181},{273,202},{695,396},{145,213},{27,203},{437,363},{396,662},{297,665},{589,620},{363,60},{331,613},{318,465},{157,186},{394,412},{671,561},{561,646},{671,364},{561,337},{646,34},{337,112},{561,638},{364,114},{114,565},{364,557},{557,538},{638,399},{638,404},{538,82},{337,454},{561,642},{561,37},{561,593},{642,612},{646,282},{364,702},{274,655},{655,526},{274,341},{526,62},{526,685},{655,87},{62,521},{685,587},{587,63},{526,92},{685,372},{521,190},{274,586},{87,25},{587,118},{92,97},{372,387},{87,515},{685,146},{526,389},{25,137},{137,609},{63,125},{515,355},{146,88},{586,608},{608,471},{125,51},{87,507},{62,348},{515,196},{118,309},{526,298},{387,410},{51,661},{87,467},{190,163},{387,188},{348,559},{190,571},{515,275},{586,352},{118,527},{92,378},{507,438},{348,172},{410,139},{92,548},{548,219},{118,198},{471,255},{389,152},{586,109},{51,289},{87,473},{608,529},{355,640},{156,466},{466,232},{156,427},{232,602},{466,13},{13,627},{466,407},{427,632},{13,129},{427,480},{97,466},{454,515},{591,608}};
    // vector<int> values = {14236792,20618578,17625828,12171119,14651881,52895939,9275359,10125598,17403129,89923507,19573718,7150632,2806174,27429255,16902869,10873596,4534737,7331679,15562865,4279922,8355368,6943569,35060863,15678616,2996817,15463955,113279641,15373685,5387012,49529630,6882240,3412322,72756657,42327539,39305909,2572558,6883532,3647379,10495075,9915762,14433799,2303183,8454466,5095121,16759709,59269295,131454,1042351,4060565,14966632,28718498,54754,6509302,165291,21971322,10230674,501864,19274181,7641626,19158921,1964602,41106960,2008832,1004813,2918504,1195627,36427136,1612834,73263003,476073562,80881643,35061588,25686885,26785018,67251510,6704217,28499953,2357166,16641168,18468727,12538244,468220,34019915,1411421,7415028,6653283,409634,31220596,7383472,4005433,10820846,3993957,9498635,3549121,5645325,6303687,15946077,2771657,14969119,9956223,10553748,12079644,39653501,11141698,8431417,15323928,216503,47348042,1287635,27144381,337454,6682268,48519112,8499457,6911469,205794,32999511,20601,2760269,2138345,4697029,27392043,20222485,25002,8656765,14243379,2279228,461296,112035692,157662920,5398143,26312467,6911548,2287588,4648074,23216369,30013217,9560176,27926278,3073992,16112547,67710846,2226919,27830211,25475615,2028492,1578226,56354726,13485673,4913880,7151336,14011906,4290926,32530446,40860837,1227151,23559850,1634210,27818026,10383504,7138737,14747890,6205726,1378553,12448227,189826,14141578,7885081,291890,2889598,42288528,24428367,19156408,3840507,19832679,5588358,21598021,13375204,23060461,2182495,6624614,4971579,15251718,3172666,32410609,10512118,22336930,12200374,2764999,8280457,1903048,14868528,218595,7807434,11017602,18893895,11766373,59403551,3360854,8833134,25528043,21590104,224734,22557194,2934987,16105022,278624,2804676,28061720,2535399,10141078,4820831,25513429,8758170,9560348,18749728,89122,14134632,8630973,10804571,8837133,12812613,43653128,26506981,3141418,76963240,41995254,22577284,15312236,4780750,21623424,11558983,24053943,8527870,10851279,184077581,27518486,25078174,9464770,137670728,3567216,1225955,4285773,9399008,474024448,10484085,2977124,9421953,20358336,6714042,8077725,11662534,12374615,1067834,6359560,4018427,336322,11832498,9326338,3043191,15678798,4396900,9079227,8593106,3219218,5261432,20255086,4617474,149530374,28767382,29029375,3364915,21040495,17960992,2274644,7715763,14784033,1205683,28049777,3702307,11045987,21606486,6636613,24720436,1197249,21112907,13841500,10802800,22299234,13743783,2049114,19395893,24856065,190241078,2715139,13139738,4344112,7367919,3277332,23868617,2797851,3470877,2050173,13239647,448662,8640187,7118601,4398741,18040690,7297354,45790787,9186926,512239,1732523,100691545,2133613,15367609,10718567,1191232,35752673,49005011,7922362,1193116,3353897,28162383,11241347,226494,4765590,25591685,121268654,1699992,2479526,11437582,2256791,14872959,407795,32886998,4808061,29452846,5928694,16255397,6937218,17806003,75962023,24190030,1404666,14992413,1246350,69903,5804774,59964888,2148515,8925782,6428618,18228132,14099450,6300558,657089,11212415,438204,18309251,12274988,36484005,4673574,15734909,369081,11109274,21567719,11172281,21483927,4523921,5883602,188676,1052458,11859868,50993535,3924442,28590029,3670181,2771851,7193441,17616245,16656149,49381225,2767743,10719676,44223463,34637427,1077622,13625625,4453973,62696016,52451396,1493985,6906269,24677283,163151,8341267,26418176,3699556,3148075,157609,14764058,50148447,1933171,201705214,10673251,31178132,1675717,1932434,23091132,7406600,476073562,3399602,16469532,1236765,6009885,5678224,15162296,31566306,271860588,32066969,29641205,1772942,4541458,40967421,6153784,28184638,16411280,15538587,599941,10253133,6343006,23470753,7450595,17968923,86393931,2438869,1472787,10607133,3225399,10220638,832329,6140420,28544410,22198300,13325172,4404182,11904366,19370748,7390006,18285007,10761380,74654506,21015614,52611156,5469884,445241,25034429,23881853,19170185,2559762,11434477,6463870,764637,3787158,126971647,15272362,385098416,7176029,3556724,579267,4905340,569997,4841861,15107374,4498855,4707702,24472624,22173930,32879584,9928429,209756,31700080,456826,2733124,1661156,128066,23517583,23973569,27847006,2412798,22532909,8645123,35610824,7837848,11025294,67624968,11160655,4548900,36224397,12225959,2948221,2150058,11966091,23359332,5321299,11032394,8428074,47615766,13435696,3275041,6825418,14918380,18607026,16560527,3350751,6186114,2911926,20517982,5312258,3370106,3994736,565728,9943662,25158600,2294860,4567718,1473571,4072698,2506197,1418060,22031202,14423343,23592960,109399975,6002090,15818353,77511200,27314723,11832210,2391332,9248903,3932723,8517664,10240480,47992474,1446467,11065058,7163713,16285309,2546602,885198,4132352,4329184,11137052,19608165,32847195,11312675,25126905,5969803,31117668,2196389,25881185,2632548,18337352,6709738,13464266,13596716,9113626,9074930,408768,7811476,4864359,1954305,4511717,80626781,25868861,866202,2071033,1491783,54905697,4933275,17043932,12418320,1652591,18163669,12672754,8113783,3391087,23309228,5882948,14814290,29417051,4773050,2638839,36093492,14596410,18890503,27688024,17881317,8615160,2242959,36710219,89308,5520065,139989,19577183,12439868,1612796,5096508,75888,8951799,15256389,24908300,19832680,14267749,476914,10668043,19106310,877987,17359939,5379388,26686920,2556896,3002834,6342038,18736795,6238632,3737580,15217696,4296554,3173839,108111222,23505853,4057782,7833993,7893533,31937344,949275,2024723,8224671,53660,10308988,3377563,3961352,20718919,55710434,1530380,2722758,15427959,36681329,672771,76562814,1382628,5065227,1263105,4660367,50345,2042691,2365870,901540,7834630,97142493,1299899,5700024,7966795,1289092,5652262,51052650,72307072,3570404,18296942,203387,45416526,10126175,6355024,7701086,15752516,20596815,8139155,982791,43074519,5487264,23162601,33972,33753604,174445,3798872,1795012,794741,26266243,14096913,1991045,24105422,2924809,20842391,1858908,12093919,16056191,12802191,199091729,35379262};
    // int k = 476073562;
    Solution S;
    cout << S.maxKDivisibleComponents(n, edges, values, k) << endl;
    return 0;
}